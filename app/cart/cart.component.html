<div class="container">
    <div class="page-header">
        <h1>Shopping cart</h1>
    </div>

    <form (ngSubmit)="goToOrder()">
        <div class="table-responsive">
            <div class="col-md-8">
                <table class="table table-striped table-hover">
                    <tr>
                        <th>Product</th>
                        <th>Name</th>
                        <th colspan="2">Unit Price</th>
                        <th>Quantity</th>
                        <th>Whole price</th>
                        <th>Remove</th>
                    </tr>
                    <tr *ngFor="let product of products; let i = index" >
                        <td><img src={{product.photos[0].link}} class="img-rounded"></td>
                        <td>{{product.name}}</td>
                        <td style="text-align:right" >{{getDiscountedProductPrice(i) }} €</td>
                        <td style="text-align:left"><span *ngIf="product.discount" style="color: #9c9c9c; text-decoration:line-through;font-size:85%;">{{getFullProductPrice(i) }} €</span> </td>
                        <td><input (ngModelChange)="onQuantityChange(purchases[i])" type="number" min="1" max={{product.quantity}}
                                   class="input" [(ngModel)]="purchases[i].quantity" placeholder="Enter quantity" name={{i}} required></td>
                        <td>{{getPurchasePrice(i)}} € </td>
                        <td> <button class="btn btn-default" (click)="removePurchase(i)"><span class="glyphicon glyphicon-remove"></span></button></td>
                    </tr>
                </table>
            </div>
        </div>
        <br>
        <div class="col-md-8">
            <p><span style="color: #9c9c9c">You save:</span> {{getSavedMoneyAmount()}} €</p>
            <h3 class="inLine"><span style="color: #9c9c9c">Your order:</span>  <b>{{orderPriceWithDiscount()}}</b> €</h3>
            <button id="proceedButton" class="inLine btn btn-primary btn-lg" type = "submit">Proceed</button>
        </div>
    </form>
</div>
